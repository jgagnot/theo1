$(document).ready(function(){var t={},e={},i=$(window).width();function n(t){return $(window).width()>=992&&$(window).width()<1200&&(t.forcedImageWidth=600,t.forcedImageHeight=250,t.separation=255),$(window).width()>=1200&&(t.forcedImageWidth=800,t.forcedImageHeight=350,t.separation=275),console.log(t),t}$(".carousel-3d").each(function(i){e[i]={speed:1e3,flankingItems:1},t[i]=$(this).waterwheelCarousel(n(e[i]))}),$(window).resize(function(){$(".carousel-3d").each(function(a){i<1200&&$(window).width()>=1200&&t[a].reload(n(e[a])),i>=1200&&$(window).width()<1200&&t[a].reload(n(e[a]))}),i=$(window).width()})}),function(t){"use strict";t.fn.waterwheelCarousel=function(e){if(this.length>1)return this.each(function(){t(this).waterwheelCarousel(e)}),this;var i=this,n={},a={};function o(t){clearTimeout(a.autoPlayTimer),t||0===n.autoPlay||(a.autoPlayTimer=setTimeout(function(){n.autoPlay>0?c("forward"):c("backward")},Math.abs(n.autoPlay)))}function r(t,e){Math.abs(e)<=n.flankingItems+1?(!function(t,e){var i=Math.abs(e);if(i<n.flankingItems+1)var o=a.calculations[i];else o=a.calculations[n.flankingItems+1];var r,s=Math.pow(n.sizeMultiplier,i),c=s*t.data("original_width"),l=s*t.data("original_height"),d=(Math.abs(t.width()-c),Math.abs(t.height()-l),o.offset),h=o.distance;if(e<0&&(h*=-1),"horizontal"==n.orientation)var u=(f=a.containerWidth/2)+h-c/2,m=n.horizon-d-l/2;else{var f=a.containerHeight/2;u=n.horizon-d-c/2,m=f+h-l/2}r=0===e?1:o.opacity;var g=n.flankingItems+2-i;t.data("width",c),t.data("height",l),t.data("top",m),t.data("left",u),t.data("oldPosition",t.data("currentPosition")),t.data("depth",g),t.data("opacity",r)}(t,e),a.itemsAnimating++,t.css("z-index",t.data().depth).animate({left:t.data().left,width:t.data().width,height:t.data().height,top:t.data().top,opacity:t.data().opacity},a.currentSpeed,n.animationEasing,function(){!function(t,e){a.itemsAnimating--,t.data("currentPosition",e),0===e&&(a.currentCenterItem=t);0===a.itemsAnimating&&(a.carouselRotationsLeft-=1,a.currentlyMoving=!1,a.carouselRotationsLeft>0?s(0):(a.currentSpeed=n.speed,a.currentCenterItem.addClass(n.activeClassName),!1===a.performingSetup&&(n.movedToCenter(a.currentCenterItem),n.movedFromCenter(a.previousCenterItem)),a.performingSetup=!1,o()))}(t,e)})):(t.data("currentPosition",e),0===t.data("oldPosition")&&t.css({left:t.data().left,width:t.data().width,height:t.data().height,top:t.data().top,opacity:t.data().opacity,"z-index":t.data().depth}))}function s(e){if(!1===a.currentlyMoving){a.currentCenterItem.removeClass(n.activeClassName),a.currentlyMoving=!0,a.itemsAnimating=0,a.carouselRotationsLeft+=e,!0===n.quickerForFurther&&(e>1&&(a.currentSpeed=n.speed/e),a.currentSpeed=a.currentSpeed<100?100:a.currentSpeed);for(var i=0;i<a.totalItems;i++){var o,s=t(a.items[i]),c=s.data("currentPosition"),l=(o="forward"==a.currentDirection?c-1:c+1)>0?a.rightItemsCount:a.leftItemsCount;Math.abs(o)>l&&(o=-1*c,a.totalItems%2==0&&(o+=1)),r(s,o)}}}function c(t){var e,i;!1===a.currentlyMoving&&(a.previousCenterItem=a.currentCenterItem,n.movingFromCenter(a.currentCenterItem),"backward"==t?(n.movingToCenter(((i=a.currentCenterItem.prev()).length<=0&&(i=a.currentCenterItem.parent().children().last()),i)),a.currentDirection="backward"):"forward"==t&&(n.movingToCenter(((e=a.currentCenterItem.next()).length<=0&&(e=a.currentCenterItem.parent().children().first()),e)),a.currentDirection="forward")),s(1)}return t(this).find("img").bind("click",function(){var e=t(this).data().currentPosition;if(0!=n.imageNav&&!(Math.abs(e)>=n.flankingItems+1||a.currentlyMoving)){a.previousCenterItem=a.currentCenterItem,o(!0),n.autoPlay=0;var i=Math.abs(e);0==e?n.clickedCenter(t(this)):(n.movingFromCenter(a.currentCenterItem),n.movingToCenter(t(this)),e<0?(a.currentDirection="backward",s(i)):e>0&&(a.currentDirection="forward",s(i)))}}),t(this).find("a").bind("click",function(e){var i=0==t(this).find("img").data("currentPosition");if(1===n.linkHandling||2===n.linkHandling&&!i)return e.preventDefault(),!1}),t(document).keydown(function(t){if(n.keyboardNav&&(37===t.which&&"horizontal"==n.orientation||38===t.which&&"vertical"==n.orientation?(o(!0),n.autoPlay=0,c("backward")):(39===t.which&&"horizontal"==n.orientation||40===t.which&&"vertical"==n.orientation)&&(o(!0),n.autoPlay=0,c("forward")),n.keyboardNavOverride&&("horizontal"==n.orientation&&(37===t.which||39===t.which)||"vertical"==n.orientation&&(38===t.which||40===t.which))))return t.preventDefault(),!1}),this.reload=function(e){if("object"==typeof e);else;n=t.extend({},t.fn.waterwheelCarousel.defaults,e),(a={itemsContainer:t(i),totalItems:t(i).find("img").length,containerWidth:t(i).width(),containerHeight:t(i).height(),currentCenterItem:null,previousCenterItem:null,items:[],calculations:[],carouselRotationsLeft:0,currentlyMoving:!1,itemsAnimating:0,currentSpeed:n.speed,intervalTimer:null,currentDirection:"forward",leftItemsCount:0,rightItemsCount:0,performingSetup:!0}).itemsContainer.find("img").removeClass(n.activeClassName),a.itemsContainer.find("img").hide(),n.forcedImageWidth&&n.forcedImageHeight&&a.itemsContainer.find("img").each(function(){t(this).width(n.forcedImageWidth),t(this).height(n.forcedImageHeight)}),function(e){if(!1!==n.preloadImages){var i=a.itemsContainer.find("img"),o=0,r=i.length;i.each(function(){t(this).bind("load",function(){(o+=1)!==r||e()}),t(this).attr("src",t(this).attr("src")),this.complete&&t(this).trigger("load")})}else e()}(function(){a.itemsContainer.find("img").each(function(){(null==t(this).data("original_width")||n.forcedImageWidth>0)&&t(this).data("original_width",t(this).width()),(null==t(this).data("original_height")||n.forcedImageHeight>0)&&t(this).data("original_height",t(this).height())}),function(){a.itemsContainer.find("img:first"),a.calculations[0]={distance:0,offset:0,opacity:1};for(var t=n.horizonOffset,e=n.separation,i=1;i<=n.flankingItems+2;i++)i>1&&(t*=n.horizonOffsetMultiplier,e*=n.separationMultiplier),a.calculations[i]={distance:a.calculations[i-1].distance+e,offset:a.calculations[i-1].offset+t,opacity:a.calculations[i-1].opacity*n.opacityMultiplier};n.edgeFadeEnabled?a.calculations[n.flankingItems+1].opacity=0:a.calculations[n.flankingItems+1]={distance:0,offset:0,opacity:0}}(),function(){a.items=a.itemsContainer.find("img");for(var e=0;e<a.totalItems;e++)a.items[e]=t(a.items[e]);0===n.horizon&&("horizontal"===n.orientation?n.horizon=a.containerHeight/2:n.horizon=a.containerWidth/2),a.itemsContainer.css("position","relative").find("img").each(function(){var e,i;"horizontal"===n.orientation?(e=a.containerWidth/2-t(this).data("original_width")/2,i=n.horizon-t(this).data("original_height")/2):(e=n.horizon-t(this).data("original_width")/2,i=a.containerHeight/2-t(this).data("original_height")/2),t(this).css({left:e,top:i,visibility:"visible",position:"absolute","z-index":0,opacity:0}).data({top:i,left:e,oldPosition:0,currentPosition:0,depth:0,opacity:0}).show()})}(),function(){n.startingItem=0===n.startingItem?Math.round(a.totalItems/2):n.startingItem,a.rightItemsCount=Math.ceil((a.totalItems-1)/2),a.leftItemsCount=Math.floor((a.totalItems-1)/2),a.carouselRotationsLeft=1,r(a.items[n.startingItem-1],0),a.items[n.startingItem-1].css("opacity",1);for(var t=n.startingItem-1,e=1;e<=a.rightItemsCount;e++)t<a.totalItems-1?t+=1:t=0,a.items[t].css("opacity",1),r(a.items[t],e);for(t=n.startingItem-1,e=-1;e>=-1*a.leftItemsCount;e--)t>0?t-=1:t=a.totalItems-1,a.items[t].css("opacity",1),r(a.items[t],e)}()})},this.next=function(){o(!0),n.autoPlay=0,c("forward")},this.prev=function(){o(!0),n.autoPlay=0,c("backward")},this.reload(e),this},t.fn.waterwheelCarousel.defaults={startingItem:1,separation:175,separationMultiplier:.6,horizonOffset:0,horizonOffsetMultiplier:1,sizeMultiplier:.7,opacityMultiplier:.8,horizon:0,flankingItems:3,speed:300,animationEasing:"linear",quickerForFurther:!0,edgeFadeEnabled:!1,linkHandling:2,autoPlay:0,orientation:"horizontal",activeClassName:"carousel-center",keyboardNav:!1,keyboardNavOverride:!0,imageNav:!0,preloadImages:!0,forcedImageWidth:0,forcedImageHeight:0,movingToCenter:t.noop,movedToCenter:t.noop,clickedCenter:t.noop,movingFromCenter:t.noop,movedFromCenter:t.noop}}(jQuery);